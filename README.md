# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

-------------------------------------------------------------------------------

## Модели данных


Тип для описания способа оплаты товара
 type method =  'online' | 'uponReceipt';

Карточка: хранит данные карточки, например полученные от сервера.
  
card {
    id: string;              // id товара
    description: string;     // описание товара 
    image:string;           // url товара
    title:string;           //  заголовок товара
    category:string;        //   категория товара 
    price:number;           //  цена товара
    
}
-------------------------------------------------------------------------------

Массив карточек - можно сделать как синглтон - класс для раоты с масивом карточек  


cardList{

 bigCard:ICard;  // будет хранить карточку, которую кликнул пользователь   
 cardList:ICard[]; // сам массив какрточек
 initList():void;   // метод заполняющий массив карточек( будет запрашивать их с сервера)  
 addBigCard(card)  // реализуем либо через setter (тогда remove не требуется) либо методом
 removeBigCard(card)  // 


}
-------------------------------------------------------------------------------
Покупатель: хранит данные покупателя
buyer 
{
    paymentMethod:method;  // переменная для хранения способа оплаты
    deliveryAddress:string; //  переменная для хранения адреса доставки
    email:string;   //  емайл покупателя    
    telephone:string; // телефон покупателя

    
}
-------------------------------------------------------------------------------
    Корзина: хранит данные о товарах в корзине. 
 basket{

    totalPrise:number;  // общая сумма корзины
    items:Map<string,number>; // коллекция пар id товара - кол-во товара
    remove(id:string):void; // метод удаляющий товар из корзины.
    

    (по макету кнопки прибавить/убавить кол- во товаров не предусмотрено)
}
-------------------------------------------------------------------------------

## Компоненты представления

Карточка отображается в трех видах:
                                    1. основной вид
                                    2. в попапе
                                    3. в корзине

В данный класс в конструктор передается template (три варианта)

cardView{      // класс для всех отображений карточки

   _id:string
   protected  cardElement: HTMLElement;
   protected  description: HTMLElement;     
   protected  image:       HTMLElement;          
   protected  title:       HTMLElement;         
   protected  category:    HTMLElement;    
   protected  price:       HTMLElement;         
   ...


   render(card: ICard):HTMLElement {}  //    будет наполнять наш темплэйт данными из модели
         
}

cardViewInList{ // отображает список карточек
в конструктор передается контейнер, в который будет передан HTMLElement содержащий последовательный набор карточек


protected cardList: cardView[];
    render():HTMLElement -  возвращает набор cardView элементов и вставляет их в контейнер
}



-------------------------------------------------

Попапы:

Базовый класс - в него будем вставлять разное содержимое - сам по себе (пустой попап - не выводится)


popup{                    //     получает базовый  template (форму и крестик)
    content:HTMLElement;  // сюда попап получает содержимое и кладет его в попап (например  new cardView() )
}

Попап корзины
popupBusket{         // наследует popup
                     // получает template содержимого корзины  и заполняет его через  busketCardView
}

Попап способа оплаты
popupPaymentMethod {        // наследует popup

                             // получает buyer и свой template
                                заполняет и отдает заполненный template
}

Попап email
popupEmail {        // наследует popup
                            // получает buyer и свой template
                                заполняет и отдает заполненный template
}


Попап подтверждения покупки

popupSuccessful{  // наследует popup
                // получает свой template,  получает корзину, выводит общую сумму, рендерит

}

------------------------------------------------------------------------------
## Слой presenter 
выделять в отдельный класс не планируется, состыковка модели и предтавления будет
происходить в основном файле index.ts


-------------------------------------------------------------------------------
## Описание событий 
События будут обрабатываться через брокер событий.


События генерируемые из view:
1. Нажатие на одну из карточек (view генерирует событие) и передает его в презентер -> Обработчик события в презентере запускает метод addBigCard(card),
который кладет карточку в модель. Модель генерирует событие, что изменилось содержание  bigCard. Презентер запускает метод renderview  (возможно просто открывает попап с карточкой, потому что список карточек у нас не меняется)
Событие card:select. 

2. Событие закрытия попапа через esc 
3. Событие закрытия попапа через клик вне попапа
4. Событие закрытия попапа через крестик
5. Событие нажатия купить в попапе карточки
6. Событие нажатия на корзину
7. Событие нажатия на кнопку оформить
8. Событие нажатия на кнопку оплатить
9. Событие нажатия на кнопку за новыми покупками

-------------------------------------------------------------------------------
